# üéâ –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–µ–Ω! –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à API —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Vercel.

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ API (packages/core) –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Vercel
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ (packages/frontend) –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Vercel
- ‚è≥ –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. üîó –û–±–Ω–æ–≤–∏—Ç—å API URL –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–í–∞—à API URL:** `https://lego-bot-core-*.vercel.app` (–∏–ª–∏ –¥—Ä—É–≥–æ–π URL –∏–∑ Vercel)

1. –û—Ç–∫—Ä–æ–π—Ç–µ `packages/frontend/script.js`
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
   ```javascript
   const API_BASE_URL = window.location.hostname === 'localhost' 
     ? 'http://localhost:3000' 
     : 'https://your-api-domain.com'; // ‚Üê –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç–æ
   ```
3. –ó–∞–º–µ–Ω–∏—Ç–µ `'https://your-api-domain.com'` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ API –∏–∑ Vercel
4. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ:
   ```bash
   git add packages/frontend/script.js
   git commit -m "Update API URL for production"
   git push
   ```
5. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### 2. üîê –û–±–Ω–æ–≤–∏—Ç—å FRONTEND_URL –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–æ—Ç–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:
   ```env
   FRONTEND_URL=https://lego-bot-frontend.vercel.app
   ```
3. –ï—Å–ª–∏ API —Ç–∞–∫–∂–µ –Ω–∞ Vercel, –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç API –≤ Vercel
   - Settings ‚Üí Environment Variables
   - –î–æ–±–∞–≤—å—Ç–µ:
     - **Key:** `FRONTEND_URL`
     - **Value:** `https://lego-bot-frontend.vercel.app`
   - –ù–∞–∂–º–∏—Ç–µ "Save"
   - –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (Redeploy)

### 3. üîë –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram Login Widget

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ `@BotFather`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/setdomain`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `legobusiness1_bot`)
4. –£–∫–∞–∂–∏—Ç–µ –¥–æ–º–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: `lego-bot-frontend.vercel.app`
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ

### 4. ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Vercel –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ API (`packages/core`) –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

**–í Settings ‚Üí Environment Variables –¥–æ–±–∞–≤—å—Ç–µ:**

- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `REDIS_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
- `ENCRYPTION_KEY` - –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- `FRONTEND_URL` - `https://lego-bot-frontend.vercel.app`
- `ROUTER_URL` - URL —Ä–æ—É—Ç–µ—Ä–∞ (Cloudflare Tunnel –∏–ª–∏ –¥—Ä—É–≥–æ–π)

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
1. –ù–∞–∂–º–∏—Ç–µ "Save"
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (Redeploy –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π)

### 5. üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

**PostgreSQL:**
- –õ–æ–∫–∞–ª—å–Ω–æ (—á–µ—Ä–µ–∑ Docker): `docker-compose up -d postgres`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (Supabase, Railway, Render, Neon –∏ —Ç.–¥.)

**Redis:**
- –õ–æ–∫–∞–ª—å–Ω–æ (—á–µ—Ä–µ–∑ Docker): `docker-compose up -d redis`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (Upstash, Railway, Render –∏ —Ç.–¥.)

### 6. üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É

#### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://your-api-url.vercel.app/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON:
```json
{
  "status": "ok",
  "databases": {
    "postgres": "connected",
    "redis": "connected"
  }
}
```

#### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://lego-bot-frontend.vercel.app`
2. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤–∏–¥–∂–µ—Ç –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Telegram

#### –¢–µ—Å—Ç 3: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∏–¥–∂–µ—Ç "Login with Telegram"
2. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø
3. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å—Ö–µ–º

#### –¢–µ—Å—Ç 4: –ó–∞–≥—Ä—É–∑–∫–∞ –±–æ—Ç–æ–≤

1. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≤–∞—à–∏ –±–æ—Ç—ã
2. –ï—Å–ª–∏ –±–æ—Ç–æ–≤ –Ω–µ—Ç:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/create_bot` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞

#### –¢–µ—Å—Ç 5: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã

1. –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ö–µ–º—É"
3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ JSON —Å—Ö–µ–º—É
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ö–µ–º—É"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –≤ Telegram

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –±–æ—Ç–æ–≤:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab:
   - –ó–∞–ø—Ä–æ—Å—ã –∫ `/api/bots` –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 200 OK
   - –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ CORS - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `FRONTEND_URL` –≤ Vercel
   - –ï—Å–ª–∏ 401 Unauthorized - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é Telegram
   - –ï—Å–ª–∏ 404 - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `API_BASE_URL` –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ï—Å–ª–∏ –≤–∏–¥–∂–µ—Ç Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ @BotFather
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–º—è –±–æ—Ç–∞ –≤ `index.html` —É–∫–∞–∑–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ë–ï–ó `@`)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS (Vercel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ï—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel (Deployments ‚Üí Logs)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö

## üìù –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] API URL –æ–±–Ω–æ–≤–ª–µ–Ω –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [ ] FRONTEND_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Vercel –¥–ª—è API
- [ ] Telegram Login Widget –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ @BotFather
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Vercel
- [ ] –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- [ ] API –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/health`
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∏–¥–∂–µ—Ç –≤—Ö–æ–¥–∞
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ë–æ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [ ] –°—Ö–µ–º—ã –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å
- [ ] –ë–æ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ Telegram

## üéØ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ö–æ–≥–¥–∞ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ Telegram:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/create_bot` –æ—Å–Ω–æ–≤–Ω–æ–º—É –±–æ—Ç—É
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Ö–µ–º—É:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
   - –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—Ö–µ–º—É

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ

## üìû –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel (Deployments ‚Üí Logs)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ URL —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö

## üéä –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!

–í–∞—à –ø—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

