# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

## ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ —Å–∫—Ä–∏–Ω—à–æ—Ç—É –≤–∏–¥–Ω–æ, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–º–µ—é—Ç **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: ROUTER_URL
- **–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `3000`
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `https://vancouver-dimensional-pushed-condo.trycloudflare.com`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å URL —Ä–æ—É—Ç–µ—Ä–∞, –∞ –Ω–µ –ø–æ—Ä—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 2: PORT
- **–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `http://localhost:3001`
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `3000` (–∏–ª–∏ –º–æ–∂–Ω–æ –≤–æ–æ–±—â–µ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å)
- **–ü—Ä–æ–±–ª–µ–º–∞:** PORT –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º, –∞ –Ω–µ URL

### –ü—Ä–æ–±–ª–µ–º–∞ 3: REDIS_URL
- **–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `redis://localhost:6379`
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** URL –≤–Ω–µ—à–Ω–µ–≥–æ Redis —Å–µ—Ä–≤–∏—Å–∞ (Upstash, Railway –∏ —Ç.–¥.)
- **–ü—Ä–æ–±–ª–µ–º–∞:** Localhost –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel, –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π Redis

### –ü—Ä–æ–±–ª–µ–º–∞ 4: DATABASE_URL
- **–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `postgresql://postgres:postgres@l...` (–ø–æ—Ö–æ–∂–µ –Ω–∞ localhost)
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** URL –≤–Ω–µ—à–Ω–µ–π PostgreSQL –±–∞–∑—ã
- **–ü—Ä–æ–±–ª–µ–º–∞:** Localhost –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel, –Ω—É–∂–Ω–∞ –≤–Ω–µ—à–Ω—è—è –ë–î

## ‚úÖ –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å ROUTER_URL

1. –û—Ç–∫—Ä–æ–π—Ç–µ Vercel ‚Üí Settings ‚Üí Environment Variables
2. –ù–∞–π–¥–∏—Ç–µ `ROUTER_URL`
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãÆ) ‚Üí Edit
4. –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞: `https://vancouver-dimensional-pushed-condo.trycloudflare.com`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å PORT

1. –ù–∞–π–¥–∏—Ç–µ `PORT`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãÆ) ‚Üí Edit
3. –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞: `3000` (–∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–∞)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π Redis

**–í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Upstash (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)**

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://upstash.com
2. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. –°–æ–∑–¥–∞–π—Ç–µ Redis database
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Redis URL (–æ–Ω –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ `redis://default:xxx@xxx.upstash.io:6379`)
5. –í Vercel –æ–±–Ω–æ–≤–∏—Ç–µ `REDIS_URL` –Ω–∞ —ç—Ç–æ—Ç URL

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway**

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://railway.app
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –î–æ–±–∞–≤—å—Ç–µ Redis service
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Redis URL
5. –í Vercel –æ–±–Ω–æ–≤–∏—Ç–µ `REDIS_URL`

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–Ω–µ—à–Ω—é—é PostgreSQL

**–í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)**

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. Settings ‚Üí Database ‚Üí Connection string
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection string (URI)
5. –í Vercel –æ–±–Ω–æ–≤–∏—Ç–µ `DATABASE_URL`

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway**

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://railway.app
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –î–æ–±–∞–≤—å—Ç–µ PostgreSQL service
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection string
5. –í Vercel –æ–±–Ω–æ–≤–∏—Ç–µ `DATABASE_URL`

**–í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Neon (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)**

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://neon.tech
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection string
4. –í Vercel –æ–±–Ω–æ–≤–∏—Ç–µ `DATABASE_URL`

### –®–∞–≥ 5: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

1. –í Vercel –æ—Ç–∫—Ä–æ–π—Ç–µ Deployments
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ù–∞–∂–º–∏—Ç–µ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãÆ) ‚Üí Redeploy
4. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π –∏–∑ GitHub

## üìã –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:

```env
DATABASE_URL=postgresql://user:password@host:port/database
REDIS_URL=redis://default:password@host:port
TELEGRAM_BOT_TOKEN=–≤–∞—à-—Ç–æ–∫–µ–Ω-–æ—Ç-@BotFather
ENCRYPTION_KEY=–≤–∞—à-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
FRONTEND_URL=https://lego-bot-frontend.vercel.app
ROUTER_URL=https://vancouver-dimensional-pushed-condo.trycloudflare.com
PORT=3000
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel:**
   - Deployments ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí Logs
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Health Check:**
   ```
   https://lego-bot-core.vercel.app/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
   ```json
   {
     "status": "ok",
     "databases": {
       "postgres": "connected",
       "redis": "connected"
     }
   }
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–æ—Ç–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- **Localhost –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel!** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç** (Redeploy)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –Ω–æ–≤—ã–º –¥–µ–ø–ª–æ—è–º

## üÜò –ï—Å–ª–∏ –±–æ—Ç –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel (Deployments ‚Üí Logs)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Health Check API
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —É @BotFather
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

