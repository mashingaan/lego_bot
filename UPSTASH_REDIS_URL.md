# üîó –ö–∞–∫–æ–π URL –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è Upstash Redis –≤ Vercel

## ‚ùì –ß—Ç–æ —Ç–∞–∫–æ–µ `https://fresh-eft-30867.upstash.io`

–≠—Ç–æ **REST URL** –¥–ª—è Upstash Redis. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è REST API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (`packages/core`) –Ω—É–∂–µ–Ω **TCP URL**, –∞ –Ω–µ REST URL.

### –ü–æ—á–µ–º—É?

–í–∞—à –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `redis` (–Ω–µ `@upstash/redis`), –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ TCP –ø—Ä–æ—Ç–æ–∫–æ–ª, –∞ –Ω–µ REST API.

## üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

### –®–∞–≥ 1: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É "TCP"

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Upstash Redis:

1. –ù–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫–∏ **"REST"** –∏ **"TCP"**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"TCP"** (–Ω–µ "REST")

### –®–∞–≥ 2: –ù–∞–π–¥–∏—Ç–µ Redis URL

–í–æ –≤–∫–ª–∞–¥–∫–µ "TCP" –≤—ã —É–≤–∏–¥–∏—Ç–µ:

**–í–∞—Ä–∏–∞–Ω—Ç A: Redis URL (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)**
```
redis://default:–í–ê–®_–ü–ê–†–û–õ–¨@fresh-eft-30867.upstash.io:6379
```

**–í–∞—Ä–∏–∞–Ω—Ç B: Environment variables**
```
UPSTASH_REDIS_HOST=fresh-eft-30867.upstash.io
UPSTASH_REDIS_PORT=6379
UPSTASH_REDIS_PASSWORD=–í–ê–®_–ü–ê–†–û–õ–¨
```

### –®–∞–≥ 3: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

**–ï—Å–ª–∏ –ø–æ–∫–∞–∑–∞–Ω –ø–æ–ª–Ω—ã–π URL:**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `redis://default:–ü–ê–†–û–õ–¨@fresh-eft-30867.upstash.io:6379`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç URL –¥–ª—è `REDIS_URL` –≤ Vercel

**–ï—Å–ª–∏ –ø–æ–∫–∞–∑–∞–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –°–æ–±–µ—Ä–∏—Ç–µ URL –≤—Ä—É—á–Ω—É—é:
  ```
  redis://default:–ü–ê–†–û–õ–¨@HOST:PORT
  ```
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–æ –≤–∞—à –∫–æ–¥ –æ–∂–∏–¥–∞–µ—Ç URL)

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Vercel

–í Vercel ‚Üí Environment Variables ‚Üí `REDIS_URL` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```
redis://default:–í–ê–®_–ü–ê–†–û–õ–¨@fresh-eft-30867.upstash.io:6379
```

–ì–¥–µ:
- `default` - —ç—Ç–æ username (–æ–±—ã—á–Ω–æ "default" –¥–ª—è Upstash)
- `–í–ê–®_–ü–ê–†–û–õ–¨` - —ç—Ç–æ –ø–∞—Ä–æ–ª—å (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ Upstash)
- `fresh-eft-30867.upstash.io` - —ç—Ç–æ —Ö–æ—Å—Ç
- `6379` - —ç—Ç–æ –ø–æ—Ä—Ç

## üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ –ø–∞—Ä–æ–ª—å

1. –í–æ –≤–∫–ª–∞–¥–∫–µ "TCP" –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ "Password" –∏–ª–∏ "Token"
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –≥–ª–∞–∑–∞ üëÅÔ∏è —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª—å

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** `https://fresh-eft-30867.upstash.io` (—ç—Ç–æ REST URL)
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** `redis://default:–ü–ê–†–û–õ–¨@fresh-eft-30867.upstash.io:6379` (—ç—Ç–æ TCP URL)

## üìù –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ REDIS_URL

```
redis://default:AAGNheAjAdj5p6FJ6Xi-N4xYzabcdefgh@fresh-eft-30867.upstash.io:6379
```

## üîÑ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ Vercel

1. –û–±–Ω–æ–≤–∏—Ç–µ `REDIS_URL` –≤ Vercel –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π TCP URL
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (Redeploy)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
   ```
   https://lego-bot-core.vercel.app/health
   ```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "status": "ok",
  "databases": {
    "redis": "connected"
  }
}
```

